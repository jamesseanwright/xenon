t=new AudioContext;e=[0,3,5,7,11];n=t.createOscillator();ld=t.createOscillator();i=t.createGain();i.gain.value=.1,n.type="square",ld.type="triangle",ld.connect(i),n.connect(i),i.connect(t.destination),n.start(),ld.start();h=1;o=0;f=0;M=0;r=()=>Math.random()+.5|0?[Math.random()+.5|0?-.06:1,Math.random()]:[Math.random(),Math.random()+.5|0?-.06:1];l=t=>t.map(t=>-.06===t?.004:1===t?-.004:0);m=(t,e)=>{t.t=r(),t.s=l(t.t),t.i=e};p=[.457,.457];u=[.005,0];d=1;q=[0,1,2].map(()=>r()).map((t,e)=>({t:t,s:l(t),h:1,o:1,i:1e3*e}));w={};this.onkeydown=(e=>{t.resume(),w[e.key]=!M});this.onkeyup=(t=>{w[t.key]=0});A=i=>{n.frequency.setValueAtTime(18.35*1.0594**e[4*Math.random()|0]*8,Math.max(i,0)/1e3+.3*f),ld.frequency.setValueAtTime(18.35*1.0594**e[4*Math.random()|0]*4,Math.max(i,0)/1e3+.3*f),c.fillStyle="#000",c.fillRect(0,0,120,120),q.map(e=>{if(e.o&&e.i<i&&(e.o=0),!e.o&&(e.t.some(t=>t<-.06||t>1.06)&&m(e,i),e.s.map((t,n)=>{e.t[n]+=t*h/3}),c.fillStyle="#008",c.translate(120*(e.t[0]+.03),120*(e.t[1]+.03)),c.rotate(.002*i),c.fillRect(-3.6,-3.6,7.2,7.2),c.strokeStyle="#fff",c.beginPath(),c.moveTo(-2.4,-2.4),c.lineTo(2.4,2.4),c.closePath(),c.stroke(),c.beginPath(),c.moveTo(-2.4,2.4),c.lineTo(2.4,-2.4),c.closePath(),c.stroke(),c.resetTransform(),p[0]+.085>=e.t[0]&&p[0]<=e.t[0]+.06&&p[1]+.085>=e.t[1]&&p[1]<=e.t[1]+.06)){d=1,(o+=1)%8==0&&h++,m(e,i);n=t.createOscillator();s=t.createGain();n.type="square",n.frequency.value=166,s.gain.value=.2,n.connect(s),s.connect(t.destination),n.start(i/1e3),n.stop(i/1e3+.05)}}),d<=0?M=1:d-=.002,u.map((t,e)=>{p[e]+=t}),w.x&&(u=[-u[1],u[0]],w.x=0),c.fillStyle="#fff",c.translate(120*(p[0]+.0425),120*(p[1]+.0425)),c.rotate(Math.atan2(u[1],u[0])),c.beginPath(),c.moveTo(-5.1,-5.1),c.lineTo(5.1,1.275),c.lineTo(-5.1,5.1),c.lineTo(-5.1,-5.1),c.closePath(),c.fill(),c.resetTransform(),c.fillStyle="#ff0",c.fillRect(6,6,.9*d*120,1.2),M&&(c.fillStyle="#fff",c.fillText("ðŸ˜¢",54,64)),f++,requestAnimationFrame(A)};a.width=a.height=120,a.style.imageRendering="mozPaintCount"in this?"optimizeSpeed":"pixelated",requestAnimationFrame(A)
